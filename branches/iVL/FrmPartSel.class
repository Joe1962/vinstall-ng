' Gambas class file

'    This file is part of vinstall-ng

'    vinstall-ng is free software: you can redistribute it and/or modify
'    it under the terms of the GNU General Public License as published by
'    the Free Software Foundation, either version 2 of the License, or
'    (at your option) any later version.

'    vinstall-ng  is distributed in the hope that it will be useful,
'    but WITHOUT ANY WARRANTY; without even the implied warranty of
'    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
'    GNU General Public License for more details.

'    You should have received a copy of the GNU General Public License
'    along with vinstall-ng.  If not, see <http://www.gnu.org/licenses/>.


PUBLIC sRootAddr AS String
PUBLIC sRootFrmt AS String
PUBLIC sHomeAddr AS String
PUBLIC sHomeFrmt AS String
PUBLIC sUsrAddr AS String
PUBLIC sUsrFrmt AS String
PUBLIC sVarAddr AS String
PUBLIC sVarFrmt AS String
PUBLIC sTmpAddr AS String
PUBLIC sTrmFrmt AS String
PUBLIC sOptAddr AS String
PUBLIC sOptFrmt AS String




PUBLIC SUB Form_Resize()

  WITH ME
    .tlBanner.Width = .ClientWidth - 16
    .scrollPartitions.Width = .tlBanner.Width
    .scrollPartitions.Height = .ClientHeight - (.tlBanner.Height + .cbDoWin.Height + 32)
    .cbDoWin.Move(.scrollPartitions.Left, .ClientHeight - .cbDoWin.Height - 8)

    
  END WITH 

END

PUBLIC SUB Form_Open()


  FMain.FrmCurr = ME
    
  ME.tlBanner.Adjust
  ME.cbDoWin.Width = MdlObjSizer.get_object_width(cbDoWin.text) + 24
  MdlPartSel.DISPLAY_PARTITION_OPTIONS
  ME.cbDoWin.Value = FALSE
  

END

PUBLIC SUB Form_Hide()
  

END

PUBLIC FUNCTION ANALYZE_PARTITION_SETUP() AS Integer
  
  IF NOT sRootAddr THEN 
    Message.Error("You must select at least one partition for \"/\" This is there the system will be installed to")
    RETURN 1
  ELSE IF NOT sRootFrmt THEN 
    Message.Error("You must select which file system type to use with your \"/\" partition.")
    RETURN 1
  ELSE 
    ClsPartSel.sRoot = sRootAddr
    ClsPartSel.fRoot = sRootFrmt
    RETURN 0
  END IF 
  
  IF sHomeAddr THEN 
    ClsPartSel.sHome = sHomeAddr
    ClsPartSel.fhome = sHomeFrmt
  END IF
  IF sUsrAddr THEN 
    ClsPartSel.sUsr = sUsrAddr
    ClsPartSel.fUsr = sUsrFrmt
  END IF
  IF sOptAddr THEN 
    ClsPartSel.sOpt = sOptAddr
    ClsPartSel.fOpt = sOptFrmt
  END IF
  IF sVarAddr THEN 
    ClsPartSel.sVar = sVarAddr
    ClsPartSel.fVar = sVarFrmt
  END IF
  IF sTmpAddr THEN 
    ClsPartSel.sVar = sTmpAddr
    ClsPartSel.fTmp = sTrmFrmt
  END IF
  
    
  
END



PUBLIC SUB cbDoWin_Click()

  ClsPartSel.bDoWin = cbDoWin.Value
    IF ClsPartSel.bDoWin = TRUE THEN 
      FMain.frmNext = FrmWinDrives
    ELSE 
      ' Move towards installing packages
    END IF
  

END

