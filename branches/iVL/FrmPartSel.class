' Gambas class file

'    This file is part of vinstall-ng

'    vinstall-ng is free software: you can redistribute it and/or modify
'    it under the terms of the GNU General Public License as published by
'    the Free Software Foundation, either version 2 of the License, or
'    (at your option) any later version.

'    vinstall-ng  is distributed in the hope that it will be useful,
'    but WITHOUT ANY WARRANTY; without even the implied warranty of
'    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
'    GNU General Public License for more details.

'    You should have received a copy of the GNU General Public License
'    along with vinstall-ng.  If not, see <http://www.gnu.org/licenses/>.


PUBLIC sRootAddr AS String
PUBLIC sRootFrmt AS String
PUBLIC sHomeAddr AS String
PUBLIC sHomeFrmt AS String
PUBLIC sUsrAddr AS String
PUBLIC sUsrFrmt AS String
PUBLIC sVarAddr AS String
PUBLIC sVarFrmt AS String
PUBLIC sTmpAddr AS String
PUBLIC sTrmFrmt AS String
PUBLIC sOptAddr AS String
PUBLIC sOptFrmt AS String




PUBLIC SUB Form_Resize()
  DIM cb AS ComboBox
  DIM iWidth AS Integer = 0
  
  WITH ME
    .tlBanner.Width = .ClientWidth - .btHelp.Width - 16
   .scrollPartitions.Resize(.tlBanner.Width + 4 + .btHelp.Width, .ClientHeight - .tlBanner.Height - (cbDoWin.Height * 3))
   .cbDoWin.Move(.scrollPartitions.Left, .ClientHeight - .cbDoWin.Height - 8)
   .btHelp.Move(.tlBanner.Left + .tlBanner.Width + 4, .tlBanner.top, MdlObjSizer.get_object_width(.btHelp.text) + 32) '+ (.tlBanner.Height / 3))

    
  END WITH 

END

PUBLIC SUB Form_Open()


  FMain.FrmCurr = ME
  ME.btHelp.Width = MdlObjSizer.get_object_width(btHelp.text) + 32
  ME.Resize(ME.Parent.Width, ME.Parent.Height - (ME.cbDoWin.height * 3))  
  ME.tlBanner.Adjust
  ME.cbDoWin.Width = MdlObjSizer.get_object_width(cbDoWin.text) + 24
  MdlPartSel.DISPLAY_PARTITION_OPTIONS
  ME.cbDoWin.Value = FALSE
  ClsPartSel.bDoWin = FALSE
  FMain.btback.Enabled = TRUE
FMain.btback.ForeColor = Color.Black
  FMain.tvPlan["Prep1"].Selected = TRUE
  FMain.tvPlan["Prep1"].Picture = MdlCore.sNowPic

END

PUBLIC SUB Form_Hide()
  FMain.tvPlan["Prep2"].Picture = MdlCore.sDonePic
END

PUBLIC FUNCTION ANALYZE_PARTITION_SETUP() AS Integer
  
  IF NOT sRootAddr THEN 
    Message.Error("You must select at least one partition for \"/\" This is there the system will be installed to")
    RETURN 1
  ELSE IF NOT sRootFrmt THEN 
    Message.Error("You must select which file system type to use with your \"/\" partition.")
    RETURN 1
  ELSE 
    ClsPartSel.sRoot = sRootAddr
    ClsPartSel.fRoot = sRootFrmt
    RETURN 0
  END IF 
  
  IF sHomeAddr THEN 
    ClsPartSel.sHome = sHomeAddr
    ClsPartSel.fhome = sHomeFrmt
  END IF
  IF sUsrAddr THEN 
    ClsPartSel.sUsr = sUsrAddr
    ClsPartSel.fUsr = sUsrFrmt
  END IF
  IF sOptAddr THEN 
    ClsPartSel.sOpt = sOptAddr
    ClsPartSel.fOpt = sOptFrmt
  END IF
  IF sVarAddr THEN 
    ClsPartSel.sVar = sVarAddr
    ClsPartSel.fVar = sVarFrmt
  END IF
  IF sTmpAddr THEN 
    ClsPartSel.sVar = sTmpAddr
    ClsPartSel.fTmp = sTrmFrmt
  END IF
  
    
  
END



PUBLIC SUB cbDoWin_Click()

  ClsPartSel.bDoWin = cbDoWin.Value
    ' ' IF ClsPartSel.bDoWin = TRUE THEN 
    ' '   FMain.frmNext = FrmWinDrives
    ' ' ELSE 
    ' '   ' Move towards installing packages
    ' ' END IF
  

END


PUBLIC SUB Form_Show()

  Form_Open

END

PUBLIC SUB btHelp_Click()

  Message("<h3>ABOUT SYSTEM PARTITIONING IN LINUX</H3>" &
  "Linux is a modular operating system. This means that is has the ability to store system and <br>" &
  "user data separately for added data security. You may install the system to a single partition <br>" &
  "by simply selecting a \"/\" value on this screen. The rest is optional. The following is a <br>" &
  "suggested setup for a typical Linux installation<br><br>" &
  "<b>/</b> - Used to store system data. This particular install requires a minimum of <i>" & ClsGlobal.iRootMin & "M</i> for this<br>" &
  "but you should considear a higher value to make sure you have room to install additional software<br>" &
  "in case you wish to.<br>" &
  "<b>/home</b> - Used to store user documents, pictures, videos. Give yourself as much room as you want<br>" &
  "Typically, you want to use the largest partition for this.<br>" &
  "<b>swap</b> - Using a swap partition is suggested if your total RAM is less than 1GB. Suggested ammount<br>" &
  "for this is <i>" & ClsGlobal.iSwapMin & "M </i> but can also be calculated as 2 times your ammount of RAM")
   
  
END


